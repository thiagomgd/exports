(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{Hw5n:function(e,t,a){"use strict";var s=a("Kx+n");a.n(s).a},"Kx+n":function(e,t,a){},by7a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pt-3 pb-2 filter-component",class:{"d-none":!e.hasPurposeVisibility||e.isEmpty,disabled:e.isDisabled},attrs:{id:"refineFilter-"+e.facetName,"data-test":"refineFilter-"+e.facetName}},[a("toggle",{attrs:{index:e.index,name:e.$store.state.translations[this.$translationLocale].key_name[e.translationKey],"is-refined":this.isRefined,disabled:e.disableToggle,advancedSearch:e.advancedSearch}},[e.showFilterSearch?a("input",{directives:[{name:"model",rawName:"v-model",value:e.aggregation_filter_input,expression:"aggregation_filter_input"}],staticClass:"mb-3 w-100 small",attrs:{type:"text",placeholder:"Search "+e.$store.state.translations[this.$translationLocale].key_name[e.translationKey]+"...",disabled:e.isDisabled},domProps:{value:e.aggregation_filter_input},on:{input:[function(t){t.target.composing||(e.aggregation_filter_input=t.target.value)},function(t){return e.updateFilter(t.target.value,e.$store,e.facetName,e.expand)}]}}):e._e(),e._v(" "),e._l(e.facets,(function(t,s){return a("div",{key:t.key,staticClass:"d-flex mb-3 mb-xl-2 w-100 font-size-xs"},e._l(t,(function(t,i){return a("a",{key:t.key,staticClass:"checkbox-wrapper checked form-check m-0 flex-basis-50 d-flex align-items-center",class:{disabled:e.checkDisabled(t.key)},attrs:{href:"#",rel:"nofollow"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isRefined,expression:"value.isRefined"}],staticClass:"fo-checkbox",attrs:{type:"checkbox",id:"filter-"+e.facetName+"-"+(2*s+i),disabled:e.checkDisabled(t.key)},domProps:{value:t.name,checked:Array.isArray(t.isRefined)?e._i(t.isRefined,t.name)>-1:t.isRefined},on:{change:[function(a){var s=t.isRefined,i=a.target,n=!!i.checked;if(Array.isArray(s)){var r=t.name,o=e._i(s,r);i.checked?o<0&&e.$set(t,"isRefined",s.concat([r])):o>-1&&e.$set(t,"isRefined",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(t,"isRefined",n)},function(a){return e.toggleRefinement(t)}]}}),e._v(" "),a("label",{staticClass:"form-check-label pr-1 pl-2",class:{disabled:e.checkDisabled(t.key)},attrs:{for:"filter-"+e.facetName+"-"+(2*s+i)}},[e._v("\n                    "+e._s(e.formatOutput(e.$store.state.translations[e.$parent.$translationLocale][e.translationValueScope][t.key]||t.key,t.doc_count))),a("strong",{staticClass:"pl-1 font-size-xxs "},[e._v(e._s(t.doc_count.toLocaleString(e.locale)))])])])})),0)})),e._v(" "),a("div",[e.totalAggregations>e.threshold&&e.displayedAggregations<=e.threshold&&e.facets.length?a("a",{staticClass:"filter-component-showmore",attrs:{rel:"nofollow",href:"#"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleMore(t)}}},[e._v("\n                + "+e._s(e.$store.state.translations[this.$translationLocale].common.show_more)+"\n            ")]):e._e(),e._v(" "),e.totalAggregations>e.threshold&&e.displayedAggregations>e.threshold?a("a",{staticClass:"filter-component-showmore",attrs:{rel:"nofollow",href:"#"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleMore(t)}}},[e._v("\n                - "+e._s(e.$store.state.translations[this.$translationLocale].common.show_less)+"\n            ")]):e._e()]),e._v(" "),a("div",{staticClass:"w-100"},[e.isRefined?a("button",{staticClass:"btn btn-lg btn-link",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.reset(t)}}},[e._v(e._s(e.$store.state.translations[this.$translationLocale].advanced_search.reset_filter))]):e._e()])],2)],1)};s._withStripped=!0;var i=a("L2JU"),n=a("sBL/"),r=a.n(n),o=a("MG4b"),l=a("maDl"),c=a("IyZH"),g=a("h6/w"),d={components:{Toggle:a("kC9S").a},mixins:[o.a,l.a],props:{purpose:Object,index:Number,showFilterSearch:{type:Boolean,required:!0},translationKey:{type:String,required:!0},translationValueScope:{type:String,required:!1,default:"facets"},facetName:{type:String,required:!0},locale:{type:String,default:"en-US"},hideValues:{type:Array,required:!1},disableValues:{type:Array,required:!1},disableToggle:{type:Boolean,required:!1},advancedSearch:{type:Boolean,default:!1},disabledContentTypes:{type:Array,default:null}},name:"RefinementList",data:function(){return{facet:{},isEmpty:!1,aggregation_filter:"",aggregation_filter_input:"",state_aggregations:null,query_filter:"",expand:!1,totalAggregations:0,displayedAggregations:0,threshold:!1}},computed:Object(i.b)({facets(e){this.isEmpty=!1,this.state_aggregations=e.aggregations[this.facetName];let t,a,s,i=e.aggregations[this.facetName];Array.isArray(i)||(i=[]),void 0!==this.hideValues&&this.hideValues.length>0&&(i=i.filter(e=>-1===this.hideValues.indexOf(e.key))),void 0!==e.aggregations["distinct_"+this.facetName]&&0===this.aggregation_filter_input.length&&(this.totalAggregations=e.aggregations["distinct_"+this.facetName].value),this.aggregation_filter_input.length>0&&(i=i.filter(e=>e.key.toLowerCase().indexOf(this.aggregation_filter_input.replace(/\s+/g," ").trim().toLowerCase())>-1),this.totalAggregations=i.length),this.threshold||(this.threshold=i.length);const n=[];for(t=0,a=i.length;t<a;t+=2)s=i.slice(t,t+2),n.push(s);return this.displayedAggregations=i.length,n.length||this.showFilterSearch||(this.isEmpty=!0,g.a.warn("Aggregations missing for "+this.facetName)),n},isDisabled(){return this.advancedSearch&&this.disabledContentTypes&&this.$store.state.filters.contentType&&this.disabledContentTypes.indexOf(this.$store.state.filters.contentType[0])>-1}}),watch:{isDisabled(){this.isDisabled&&this.reset()}},methods:{reset(e=!0){this.$store.commit("RESET_FILTER",{facet:this.facetName}),e&&this.$store.dispatch("CALL_API",this.$eventHub)},checkDisabled(e){return this.isDisabled||"contentType"===this.facetName&&0===this.$store.state.aggregations.contentType.filter(t=>t.key===e&&t.doc_count>0).length},formatOutput(e,t){return"string"==typeof e?(e.substring(0,parseInt(18-t.toString.length))+"").replace("_"," ").replace(/^([a-z])|\s+([a-z])/g,(function(e){return e.toUpperCase()})):"number"==typeof e?1===e?this.$store.state.translations[this.$translationLocale].key_name.true:e:void 0},compareValues:(e,t="asc")=>function(a,s){if(!Object.prototype.hasOwnProperty.call(a,e)||!Object.prototype.hasOwnProperty.call(s,e))return 0;const i="string"==typeof a[e]?a[e].toUpperCase():a[e],n="string"==typeof s[e]?s[e].toUpperCase():s[e];let r=0;return i>n?r=1:i<n&&(r=-1),"desc"===t?-1*r:r},updateFilter:r()((e,t,a,s)=>{t.dispatch("FILTER_AGGREGATION",{aggregation:a,aggregation_filter:e.replace(/\s+/g," ").trim(),expand:s})},180),toggleRefinement(e){this.aggregation_filter_input="",void 0!==this.$store.state.aggregations["distinct_"+this.facetName]&&(this.totalAggregations=this.$store.state.aggregations["distinct_"+this.facetName].value),c.a.trackEvent(["track-filter",this.$options._componentTag,this.facetName,e.key],!0),this.$store.commit("UPDATE_FILTER",{facet:this.facetName,key:e.key,isRefined:e.isRefined}),this.$store.dispatch("CALL_API",this.$eventHub)},toggleMore(){this.isDisabled||(this.expand=!this.expand,this.updateFilter(this.aggregation_filter_input,this.$store,this.facetName,this.expand))},trimSpaces:e=>e.replace(/\s+/g," ").trim()}},h=(a("Hw5n"),a("KHd+")),f=Object(h.a)(d,s,[],!1,null,"ddef5212",null);f.options.__file="assets/base-theme/js/modules/filters/RefinementList.vue";t.default=f.exports}}]);