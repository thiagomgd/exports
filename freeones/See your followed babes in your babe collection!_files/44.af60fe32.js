(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{EaQQ:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.loading?t._e():o("div",["video"===t.contentType&&void 0===t.added?o("div",[o("div",{staticClass:"add-to-collection d-flex flex-column p-4"},[o("h4",{staticClass:"border-bottom border-color-border border-width-1 pb-3 mb-3 w-100 font-weight-bold d-flex justify-content-between"},[t._v("\n        "+t._s(t.$store.state.translations[this.$translationLocale].common.addToCollection)+"\n        "),o("button",{staticClass:"icon-button",attrs:{title:t.$store.state.translations[this.$translationLocale].collection_edit.close,"aria-label":t.$store.state.translations[this.$translationLocale].collection_edit.close},on:{click:function(e){return t.hide()}}},[o("icon",{attrs:{icon:"close",classes:"svg-icon-mlm "}})],1)]),t._v(" "),o("form",[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.createCollectionVisible,expression:"!createCollectionVisible"}],staticClass:"form-group mb-0"},[o("label",{staticClass:"font-weight-bold"},[t._v(t._s(t.$store.state.translations[this.$translationLocale].common.yourPlaylists))]),t._v(" "),o("div",{staticClass:"d-flex flex-row mb-2"},[o("div",{staticClass:"select-wrapper d-flex align-items-center w-70 mr-2"},[o("select",{ref:"collectionId",staticClass:"form-control border-none",attrs:{id:"collections"}},t._l(t.userCollections,(function(e){return o("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])})),0)]),t._v(" "),o("button",{staticClass:"btn btn-primary flex-1",attrs:{type:"button"},on:{click:function(e){return t.addToCollection()}}},[t._v("\n              "+t._s(t.$store.state.translations[this.$translationLocale].common.addToCollection)+"\n            ")])]),t._v(" "),o("a",{staticClass:"font-size-s hand",attrs:{href:"#"},on:{click:function(e){return t.toggleCreateCollection()}}},[t._v(t._s(t.$store.state.translations[this.$translationLocale].common.createNewPlaylist))])]),t._v(" "),t.createCollectionVisible?o("playlist-form",{on:{close:t.toggleCreateCollection}}):t._e()],1)])]):o("div",[o("div",{staticClass:"add-to-collection d-flex flex-column p-4"},[o("h4",{staticClass:"mb-0 w-100 font-weight-bold d-flex justify-content-between"},[t._v("\n        "+t._s(t.$store.state.translations[this.$translationLocale].common[t.added?"successfullyAdded":"successfullyRemoved"])+"\n        "),o("button",{staticClass:"icon-button",attrs:{title:t.$store.state.translations[this.$translationLocale].collection_edit.close,"aria-label":t.$store.state.translations[this.$translationLocale].collection_edit.close},on:{click:function(e){return t.hide()}}},[o("icon",{attrs:{icon:"close",classes:"svg-icon-mlm "}})],1)])])])])};s._withStripped=!0;var i=o("vDqi"),l=o.n(i),n=o("h6/w"),a=o("PJnj"),c={name:"PlaylistSelect",components:{PlaylistForm:()=>({component:o.e(38).then(o.bind(null,"BLte")),loading:a.a})},mixins:[o("07u2").a],props:{propContentType:{type:String},propTypeId:{type:String},propIsFollowing:{type:Boolean,default:!1}},data:()=>({loading:!1,userCollections:!1,added:!1,init:!1,isFollowing:!1,contentType:"",typeId:"",createCollectionVisible:!1}),methods:{removeFromCollection(){this.loading=!0,l.a.post(`/user-favorite/${this.contentType}/${this.typeId}/remove`).then(t=>{this.loading=!1,this.added=!1,this.isFollowing=!1,this.$eventHub.$emit("contentRemovedFromCollection",this.contentType,this.typeId)}).catch(t=>{n.a.error(t.message,t)})},addToCollection(){let t;this.loading=!0,"video"===this.contentType&&(t={collectionId:this.$refs.collectionId.value}),l.a.post(`/user-favorite/${this.contentType}/${this.typeId}/add`,t).then(t=>{this.loading=!1,this.added=!0,this.isFollowing=!0,this.$eventHub.$emit("contentAddedToCollection",this.contentType,this.typeId)}).catch(t=>{n.a.error(t.message,t)})},getCollections(){l.a.post("/my/collections/get",{contentType:this.contentType}).then(t=>{this.userCollections=t.data,this.loading=!1,this.init=!0}).then(t=>{0===this.userCollections.length&&this.createCollectionPost(this.$store.state.translations.common.myFirstPlaylist,"")}).catch(t=>{this.loading=!1,n.a.error(t.response.data.error)})},toggleCreateCollection(t){t&&(this.userCollections.unshift(t),this.$refs.collectionId.value=t.id),this.createCollectionVisible=!this.createCollectionVisible},hide(){this.$emit("hide"),this.createCollectionVisible=!1,this.added=!1,this.remove=!1}},created(){if(this.added=void 0,this.contentType=this.$props.propContentType,this.typeId=this.$props.propTypeId,this.isFollowing=this.$props.propIsFollowing,"video"!==this.contentType||this.isFollowing){if(this.isFollowing)return void this.removeFromCollection();this.addToCollection()}else this.init||this.getCollections()}},r=o("KHd+"),d=Object(r.a)(c,s,[],!1,null,null,null);d.options.__file="assets/base-theme/js/components/collections/PlaylistSelect.vue";e.default=d.exports}}]);