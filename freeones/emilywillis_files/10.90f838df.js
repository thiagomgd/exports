(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{gXHn:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"form-group w-100 mb-2"},[e.showLabel?s("label",{staticClass:"font-weight-bold",attrs:{for:"suggest-input"}},[e._v("\n            "+e._s(e.scope&&e.$store.state.translations[this.$translationLocale].suggest_dialog[e.scope].label)+"\n        "),e.required?[e._v("*")]:e._e()],2):e._e(),e._v(" "),s("div",{staticClass:"d-flex flex-row mb-2"},[s("SuggestInput",{attrs:{id:"suggest-input",placeholder:e.scope&&e.$store.state.translations[this.$translationLocale].suggest_dialog[e.scope].placeholder,max:e.max,scope:e.scope,linkRoute:e.linkRoute,addSuggestions:e.addSuggestions,searchSuggestions:e.searchSuggestions,createNewSuggestions:e.createNewSuggestions,itemTemplate:e.itemTemplate,onAddSuggestion:e.addSuggestion,suggestions:e.suggestions}})],1)]),e._v(" "),s("div",{staticClass:"suggestions-list"},[e.suggestions.length?s("ul",e._l(e.suggestions,(function(t,n){return s("li",{key:t.id},[t?[s("string"==typeof t?"SuggestTagItem":e.itemTemplate,{tag:"component",attrs:{value:t,scope:e.scope,tagName:e.tagName}},[t.noDelete?e._e():s("a",{staticClass:"suggestion-remove-btn",attrs:{href:"#",title:e.$store.state.translations[e.$parent.$translationLocale].suggest_dialog.remove},on:{click:function(s){return e.removeSuggestion(t)}}},[[s("icon",{attrs:{icon:"close",classes:"svg-icon-md"}})]],2)]),e._v(" "),s("input",{attrs:{type:"hidden",name:e.inputName+"["+n+"][id]"},domProps:{value:t.id}}),e._v(" "),s("input",{attrs:{type:"hidden",name:e.inputName+"["+n+"][name]"},domProps:{value:t.name}}),e._v(" "),t.title?s("input",{attrs:{type:"hidden",name:e.inputName+"["+n+"][title]"},domProps:{value:t.title}}):e._e(),e._v(" "),s("input",{attrs:{type:"hidden",name:e.inputName+"["+n+"][imageUrl]"},domProps:{value:e.getThumb(t)}})]:e._e()],2)})),0):e._e()])])};n._withStripped=!0;var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideSuggestions,expression:"hideSuggestions"}],staticClass:"d-flex align-items-center w-100 position-relative"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"form-control flex-1",attrs:{id:e.id,type:"text",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",placeholder:e.placeholder,disabled:!0===e.disableInput},domProps:{value:e.query},on:{input:[function(t){t.target.composing||(e.query=t.target.value)},e.onInput],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addNewSuggestion(t))},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),t.preventDefault(),e.focusNextItem(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.stopPropagation(),t.preventDefault(),e.hideSuggestions(t))}],click:e.onInput}}),e._v(" "),this.createNewSuggestions?s("button",{staticClass:"btn btn-secondary align-self-stretch ml-1",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.addNewSuggestion(t)}}},[e._v(e._s(e.$store.state.translations[e.translationLocale].suggest_dialog.new_suggestion))]):e._e(),e._v(" "),s("suggest-flyout")],1)};o._withStripped=!0;var i=s("5Web"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return this.$parent.showResult?s("div",{staticClass:"suggest-flyout"},[this.$parent.filteredResult.length?s("ol",{ref:"resultList",on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),t.preventDefault(),this.$parent.focusNextItem(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),t.preventDefault(),this.$parent.focusPreviousItem(t))}]}},e._l(this.$parent.filteredResult,(function(t,n){return s("li",{key:t.id},[s(e.$parent.itemTemplate,{tag:"component",attrs:{value:t,scope:e.$parent.scope,onClick:e.$parent.addSuggestion,focus:e.$parent.focusIndex===n,tagName:"a",linkRoute:e.$parent.linkRoute}})],1)})),0):s("p",[e._v("\n        "+e._s(this.$parent.$store.state.translations[this.$parent.$translationLocale].suggest_dialog.no_results)+"\n    ")])]):e._e()};a._withStripped=!0;var u=s("KHd+"),r=Object(u.a)({},a,[],!1,null,null,null);r.options.__file="assets/base-theme/js/modules/suggest/SuggestFlyout.vue";var g=r.exports,l={name:"SuggestInput",extends:i.a,components:{SuggestFlyout:g},props:{id:{type:String,required:!0},onAddSuggestion:{type:Function,required:!0},itemTemplate:{type:Object}}},d=Object(u.a)(l,o,[],!1,null,null,null);d.options.__file="assets/base-theme/js/modules/suggest/SuggestInput.vue";var c=d.exports,p=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.tagName,{ref:"itemLink",tag:"component",attrs:{href:"a"===e.tagName&&"#"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.onClick&&e.onClick(e.value)}}},[e._v("\n       "+e._s(e.value.name)+"\n    "),e._t("default")],2)};p._withStripped=!0;var m={name:"SuggestTagItem",props:{value:{type:Object,required:!0},onClick:{type:Function,required:!1},tagName:{type:String,default:"a"}}},h=Object(u.a)(m,p,[],!1,null,null,null);h.options.__file="assets/base-theme/js/modules/suggest/TextItem.vue";var f=h.exports,v=s("VVO6"),_={name:"suggest",components:{SuggestInput:c},props:{scope:{type:String,required:!0},suggestionsMode:{type:String,default:"row"},inputName:{type:String,required:!0},showLabel:{type:Boolean,default:!0},createNewSuggestions:{type:Boolean,default:!1},searchSuggestions:{type:Boolean,default:!0},addSuggestions:{type:Boolean,default:!0},linkRoute:{type:String},max:{type:Number},required:{type:Boolean,default:!1},existingSuggestions:{type:Array,required:!1}},data:()=>({linkId:null,suggesting:!1,suggested:!1,error:!1,query:"",suggestions:[]}),computed:{itemTemplate(){switch(this.suggestionsMode){case"text":return f;default:return v.a}},tagName(){return this.addSuggestions?"div":"a"}},methods:{getThumb:e=>e.subjectMedia&&e.subjectMedia.length&&e.subjectMedia[0].media?e.subjectMedia[0].media.teaserImageUrl:e.teaserImage?e.teaserImage:e.image?e.image:!!e.imageUrl&&e.imageUrl,addSuggestion(e){this.suggestions.push(e)},removeSuggestion(e){this.suggestions=this.suggestions.filter(t=>t!==e)},trimAll:e=>e.replace(/\s+/g," ").trim()},mounted(){this.$props.existingSuggestions&&(this.suggestions=this.$props.existingSuggestions)}},y=Object(u.a)(_,n,[],!1,null,null,null);y.options.__file="assets/base-theme/js/modules/suggest/suggest.vue";t.default=y.exports},"yL+A":function(e,t,s){"use strict";s.d(t,"b",(function(){return S})),s.d(t,"a",(function(){return b}));var n=s("oCYn"),o=s("GIGG"),i=s.n(o),a=s("SluN"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("modal",{attrs:{name:"suggest",width:"600px",height:"auto",adaptive:!0,classes:"suggest-modal-content bg-color-tertiary"}},[s("div",{staticClass:"p-4"},[s("h4",{staticClass:"border-bottom border-color-border border-width-1 pb-3 mb-3 w-100 font-weight-bold d-flex justify-content-between"},[e._v("\n            "+e._s(e.scope&&e.$store.state.translations[this.$translationLocale].suggest_dialog[e.scope].title)+"\n            "),s("button",{staticClass:"icon-button",attrs:{type:"button",title:e.$store.state.translations[this.$translationLocale].suggest_dialog.close,"aria-label":e.$store.state.translations[this.$translationLocale].suggest_dialog.close},on:{click:e.hide}},[s("icon",{attrs:{icon:"close",classes:"svg-icon-mlm "}})],1)]),e._v(" "),s("form",{directives:[{name:"show",rawName:"v-show",value:!e.suggested&&!e.error,expression:"!suggested && !error"}],ref:"form"},[s("div",{staticClass:"add-to-collection d-flex flex-column "},[s("input",{attrs:{type:"hidden",name:"linkId"},domProps:{value:e.linkId}}),e._v(" "),e.loadedSuggest?[s("suggest",{attrs:{scope:e.scope,suggestionsMode:e.suggestionsMode,showLabel:!1,inputName:e.scope,createNewSuggestions:e.createNewSuggestions,existingSuggestions:e.existingSuggestions}})]:e._e(),e._v(" "),s("div",{staticClass:"float-right"},[s("button",{staticClass:"btn btn btn-outline-white",attrs:{type:"button",disabled:e.suggesting},on:{click:e.hide}},[e._v("\n                        "+e._s(e.$store.state.translations[this.$translationLocale].suggest_dialog.cancel)+"\n                    ")]),e._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.suggesting},on:{click:e.suggest}},[e._v("\n                        "+e._s(e.$store.state.translations[this.$translationLocale].suggest_dialog.suggest)+"\n                    ")])])],2)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.suggested,expression:"suggested"}]},[e._v("\n            "+e._s(e.scope&&e.$store.state.translations[this.$translationLocale].suggest_dialog[e.scope].suggested)+"\n        ")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v("\n            "+e._s(e.$store.state.translations[this.$translationLocale].suggest_dialog.error)+"\n        ")])])])};u._withStripped=!0;var r=s("vDqi"),g=s.n(r),l=s("PJnj"),d=s("h6/w"),c={name:"SuggestModal",components:{Suggest:()=>({component:Promise.resolve().then(s.bind(null,"gXHn")),loading:l.a})},data:()=>({linkId:null,scope:null,suggesting:!1,suggestionsMode:"row",existingSuggestions:[],suggested:!1,createNewSuggestions:!1,error:!1,loadedSuggest:!1}),methods:{show:function(e,t,s=[],n="row",o=!1){this.suggested=!1,this.error=!1,this.linkId=e,this.existingSuggestions=s,this.scope=t,this.createNewSuggestions=o,this.suggestionsMode=n,this.loadedSuggest=!0,this.$modal.show("suggest")},hide(){this.suggested=!1,this.$modal.hide("suggest")},suggest:function(e){e.preventDefault(),this.suggesting=!0,g.a.post("/suggest",new FormData(this.$refs.form)).then(e=>{this.suggested=!0,this.suggesting=!1}).catch(e=>{this.error=!0,this.suggesting=!1,d.a.error(e.message,e)})}},mounted:function(){this.$eventHub.$on("showSuggestModal",this.show)}},p=s("KHd+"),m=Object(p.a)(c,u,[],!1,null,null,null);m.options.__file="assets/base-theme/js/modules/suggest/SuggestModal.vue";var h=m.exports,f=s("gXHn"),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"font-size-xxs font-weight-light text-uppercase d-flex align-items-center justify-content-center pb-1 ml-1",class:[e.classes],attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.show()}}},[s("icon",{attrs:{icon:"edit",classes:"svg-icon-sm"}})],1)};v._withStripped=!0;var _={name:"SuggestButton",props:{linkId:{type:String},scope:{type:String},classes:{type:String},existingSuggestions:{type:Array,default:function(){return[]}},createNewSuggestions:{type:Boolean,default:!1},suggestionsMode:{type:String}},methods:{show(){this.$eventHub.$emit("showSuggestModal",this.linkId,this.scope,this.existingSuggestions,this.suggestionsMode,this.createNewSuggestions)}}},y=Object(p.a)(_,v,[],!1,null,null,null);y.options.__file="assets/base-theme/js/modules/suggest/SuggestButton.vue";var w=y.exports;s("cuyG");function S(){const e=document.getElementById("vue-suggest-modal");if(e){n.default.use(i.a);new n.default({store:a.a,components:{SuggestModal:h}}).$mount(e)}(()=>{const e=document.getElementsByClassName("vue-suggest-button");if(e)for(const t of e){n.default.use(i.a);new n.default({store:a.a,components:{SuggestButton:w}}).$mount(t)}})()}function b(){const e=document.querySelectorAll(".vue-suggest");e.length&&e.forEach(e=>{n.default.use(i.a);new n.default({store:a.a,components:{Suggest:f.default}}).$mount(e)})}}}]);